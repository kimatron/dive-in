{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/post_detail.css' %}">
{% endblock %}

{% block content %}
<!-- Hero Section -->
<div class="post-hero">
    {% if post.featured_image %}
    <img src="{{ post.featured_image.url }}" alt="{{ post.title }}" class="post-hero__image">
    {% else %}
    <img src="{% static 'images/default-hero.jpg' %}" alt="{{ post.title }}" class="post-hero__image">
    {% endif %}
    <div class="post-hero__overlay"></div>
    
    <div class="post-container">
        <div class="post-hero__content">
            {% if post.category %}
            <span class="post-hero__category">{{ post.category.name }}</span>
            {% endif %}
            
            <h1 class="post-hero__title">{{ post.title }}</h1>
            
            <div class="post-hero__meta">
                <div class="post-hero__meta-item">
                    <img src="{{ post.author.userprofile.profile_picture.url }}" 
                         alt="{{ post.author.username }}" 
                         class="rounded-circle"
                         style="width: 40px; height: 40px; object-fit: cover;">
                    <span>By {{ post.author.username }}</span>
                </div>
                <div class="post-hero__meta-item">
                    <i class="far fa-calendar"></i>
                    <span>{{ post.created_on|date:"F j, Y" }}</span>
                </div>
                <div class="post-hero__meta-item">
                    <i class="far fa-comment"></i>
                    <span>{{ comment_count }} Comments</span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Main Content -->
<div class="post-container">
    <div class="post-grid">
        <!-- Main Content Area -->
        <div class="post-main">
            <article class="post-card">
                <div class="post-content">
                    {{ post.content | safe }}
                </div>
            </article>
            
         
        </div>
        <!-- After the post content, before comments -->
<div class="author-section">
  <div class="author-card">
      <div class="author-card__header">
          <div class="author-card__avatar">
              {% if post.author.userprofile.profile_picture %}
                  <img src="{{ post.author.userprofile.profile_picture.url }}" 
                       alt="{{ post.author.username }}" 
                       class="author-card__image">
              {% else %}
                  <img src="{% static 'images/default-avatar.png' %}" 
                       alt="{{ post.author.username }}" 
                       class="author-card__image">
              {% endif %}
          </div>
          <div class="author-card__info">
              <h3 class="author-card__name">About {{ post.author.username }}</h3>
              {% if post.author.userprofile.bio %}
                  <p class="author-card__bio">{{ post.author.userprofile.bio }}</p>
              {% endif %}
          </div>
      </div>
      <div class="author-card__footer">
          <a href="#" class="author-card__link">View Profile</a>
          <a href="#" class="author-card__link">More Posts</a>
      </div>
  </div>
</div>
        <div class="post-sidebar">
        </div>
    </div>
</div>
{% endblock %}